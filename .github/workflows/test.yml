name: ðŸ§ª Test Modules

on:
  push:
    paths: 
    - modules/**
    branches: 
    - main
  pull_request:
    paths: 
    - modules/**

env:
  GITHUB_APP_ID: ${{ vars.GH_APP_ID }}
  GITHUB_APP_INSTALLATION_ID: ${{ vars.GH_APP_INSTALLATION_ID }}
  GITHUB_APP_PEM_FILE: ${{ secrets.GH_APP_KEY }}

jobs:
  tf_module_test:
    name: Test
    uses: duplocloud/actions/.github/workflows/test-tf-modules.yml@main
    secrets: inherit
    with:
      environment: salesdemo
      tenant: tf-tests
